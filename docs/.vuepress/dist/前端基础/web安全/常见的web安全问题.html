<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>XSS攻击 | Guangyuan&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/logo.jpg">
    <meta name="description" content="广园的个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.2a2f6a7f.css" as="style"><link rel="preload" href="/assets/js/app.5ca665a5.js" as="script"><link rel="preload" href="/assets/js/2.7f87610c.js" as="script"><link rel="preload" href="/assets/js/39.16024434.js" as="script"><link rel="prefetch" href="/assets/js/10.39ff8e41.js"><link rel="prefetch" href="/assets/js/100.79d86cef.js"><link rel="prefetch" href="/assets/js/101.afdae1fe.js"><link rel="prefetch" href="/assets/js/102.fa77b86c.js"><link rel="prefetch" href="/assets/js/103.e1144c60.js"><link rel="prefetch" href="/assets/js/104.8eb8d565.js"><link rel="prefetch" href="/assets/js/105.9266c4c9.js"><link rel="prefetch" href="/assets/js/106.26a09d48.js"><link rel="prefetch" href="/assets/js/107.973b8372.js"><link rel="prefetch" href="/assets/js/108.8471eed3.js"><link rel="prefetch" href="/assets/js/109.bfd25dad.js"><link rel="prefetch" href="/assets/js/11.9a3dbf4e.js"><link rel="prefetch" href="/assets/js/110.d59d6dd9.js"><link rel="prefetch" href="/assets/js/111.89171d8d.js"><link rel="prefetch" href="/assets/js/112.37217c5d.js"><link rel="prefetch" href="/assets/js/113.3e37de63.js"><link rel="prefetch" href="/assets/js/114.28dbeb0e.js"><link rel="prefetch" href="/assets/js/115.426bfc64.js"><link rel="prefetch" href="/assets/js/116.c9878898.js"><link rel="prefetch" href="/assets/js/117.9b6a9aa9.js"><link rel="prefetch" href="/assets/js/118.3e46738c.js"><link rel="prefetch" href="/assets/js/119.9a883a2f.js"><link rel="prefetch" href="/assets/js/12.166a4f87.js"><link rel="prefetch" href="/assets/js/120.50034ad9.js"><link rel="prefetch" href="/assets/js/121.919f1d35.js"><link rel="prefetch" href="/assets/js/122.9f958e4f.js"><link rel="prefetch" href="/assets/js/123.90e70940.js"><link rel="prefetch" href="/assets/js/124.eb105ac5.js"><link rel="prefetch" href="/assets/js/125.b59ee438.js"><link rel="prefetch" href="/assets/js/126.22bd758d.js"><link rel="prefetch" href="/assets/js/127.fc73a304.js"><link rel="prefetch" href="/assets/js/128.02f3e3db.js"><link rel="prefetch" href="/assets/js/129.0d41b486.js"><link rel="prefetch" href="/assets/js/13.50139c6a.js"><link rel="prefetch" href="/assets/js/130.7d5662c8.js"><link rel="prefetch" href="/assets/js/131.2183ad9b.js"><link rel="prefetch" href="/assets/js/132.477c2eca.js"><link rel="prefetch" href="/assets/js/133.ac368d46.js"><link rel="prefetch" href="/assets/js/134.0e3e518d.js"><link rel="prefetch" href="/assets/js/135.9a36aeb2.js"><link rel="prefetch" href="/assets/js/136.dc734229.js"><link rel="prefetch" href="/assets/js/137.c9353968.js"><link rel="prefetch" href="/assets/js/138.f8a49a08.js"><link rel="prefetch" href="/assets/js/139.862b85e1.js"><link rel="prefetch" href="/assets/js/14.f82259d9.js"><link rel="prefetch" href="/assets/js/140.e57abd3d.js"><link rel="prefetch" href="/assets/js/141.6b8366c6.js"><link rel="prefetch" href="/assets/js/142.468e4f22.js"><link rel="prefetch" href="/assets/js/143.8f98a8c3.js"><link rel="prefetch" href="/assets/js/144.ddfdb8cf.js"><link rel="prefetch" href="/assets/js/145.b1cc32cc.js"><link rel="prefetch" href="/assets/js/146.8ace10d4.js"><link rel="prefetch" href="/assets/js/147.5801cce4.js"><link rel="prefetch" href="/assets/js/148.1d239422.js"><link rel="prefetch" href="/assets/js/149.83b8ee95.js"><link rel="prefetch" href="/assets/js/15.24a16fb8.js"><link rel="prefetch" href="/assets/js/150.643fbec7.js"><link rel="prefetch" href="/assets/js/151.b37d5734.js"><link rel="prefetch" href="/assets/js/152.13d15d91.js"><link rel="prefetch" href="/assets/js/153.ecbb342c.js"><link rel="prefetch" href="/assets/js/154.b4064206.js"><link rel="prefetch" href="/assets/js/155.50c5a45b.js"><link rel="prefetch" href="/assets/js/156.2729ffb4.js"><link rel="prefetch" href="/assets/js/157.a2e45789.js"><link rel="prefetch" href="/assets/js/158.f7c5e384.js"><link rel="prefetch" href="/assets/js/159.78e0780c.js"><link rel="prefetch" href="/assets/js/16.9ea53024.js"><link rel="prefetch" href="/assets/js/17.7c84e20e.js"><link rel="prefetch" href="/assets/js/18.b97b136b.js"><link rel="prefetch" href="/assets/js/19.8293ace3.js"><link rel="prefetch" href="/assets/js/20.119cb64d.js"><link rel="prefetch" href="/assets/js/21.080cc555.js"><link rel="prefetch" href="/assets/js/22.97cd32b0.js"><link rel="prefetch" href="/assets/js/23.cced24de.js"><link rel="prefetch" href="/assets/js/24.2a9ecf25.js"><link rel="prefetch" href="/assets/js/25.ce6088ac.js"><link rel="prefetch" href="/assets/js/26.fd1ecc55.js"><link rel="prefetch" href="/assets/js/27.090e91ce.js"><link rel="prefetch" href="/assets/js/28.69f5f86b.js"><link rel="prefetch" href="/assets/js/29.52c7cb95.js"><link rel="prefetch" href="/assets/js/3.c4eac312.js"><link rel="prefetch" href="/assets/js/30.cf43ce68.js"><link rel="prefetch" href="/assets/js/31.d04801f0.js"><link rel="prefetch" href="/assets/js/32.ae758014.js"><link rel="prefetch" href="/assets/js/33.ce4eefc8.js"><link rel="prefetch" href="/assets/js/34.ded5fe9d.js"><link rel="prefetch" href="/assets/js/35.58051fff.js"><link rel="prefetch" href="/assets/js/36.a059f328.js"><link rel="prefetch" href="/assets/js/37.35b1a31d.js"><link rel="prefetch" href="/assets/js/38.90343efa.js"><link rel="prefetch" href="/assets/js/4.1cc0d209.js"><link rel="prefetch" href="/assets/js/40.1721f697.js"><link rel="prefetch" href="/assets/js/41.96ab9529.js"><link rel="prefetch" href="/assets/js/42.72acda68.js"><link rel="prefetch" href="/assets/js/43.a111a09b.js"><link rel="prefetch" href="/assets/js/44.77593011.js"><link rel="prefetch" href="/assets/js/45.d43d7cc3.js"><link rel="prefetch" href="/assets/js/46.6a22eaab.js"><link rel="prefetch" href="/assets/js/47.911df222.js"><link rel="prefetch" href="/assets/js/48.dd3fe992.js"><link rel="prefetch" href="/assets/js/49.02d488bc.js"><link rel="prefetch" href="/assets/js/5.3556fd7a.js"><link rel="prefetch" href="/assets/js/50.a26df345.js"><link rel="prefetch" href="/assets/js/51.e2c91341.js"><link rel="prefetch" href="/assets/js/52.131d29d3.js"><link rel="prefetch" href="/assets/js/53.c65ca153.js"><link rel="prefetch" href="/assets/js/54.240b51b5.js"><link rel="prefetch" href="/assets/js/55.23794075.js"><link rel="prefetch" href="/assets/js/56.32815dbe.js"><link rel="prefetch" href="/assets/js/57.045f931a.js"><link rel="prefetch" href="/assets/js/58.65f1afae.js"><link rel="prefetch" href="/assets/js/59.6f8e1491.js"><link rel="prefetch" href="/assets/js/6.b0bc7ec1.js"><link rel="prefetch" href="/assets/js/60.996f1d59.js"><link rel="prefetch" href="/assets/js/61.ac2e080d.js"><link rel="prefetch" href="/assets/js/62.5252034f.js"><link rel="prefetch" href="/assets/js/63.98c4d857.js"><link rel="prefetch" href="/assets/js/64.799aff95.js"><link rel="prefetch" href="/assets/js/65.e245eebf.js"><link rel="prefetch" href="/assets/js/66.0cd75019.js"><link rel="prefetch" href="/assets/js/67.607bdcbb.js"><link rel="prefetch" href="/assets/js/68.61fdd270.js"><link rel="prefetch" href="/assets/js/69.8463ae35.js"><link rel="prefetch" href="/assets/js/7.e221ee22.js"><link rel="prefetch" href="/assets/js/70.127df8e9.js"><link rel="prefetch" href="/assets/js/71.998460a4.js"><link rel="prefetch" href="/assets/js/72.54de6df1.js"><link rel="prefetch" href="/assets/js/73.18027925.js"><link rel="prefetch" href="/assets/js/74.6baaadbe.js"><link rel="prefetch" href="/assets/js/75.978c0afe.js"><link rel="prefetch" href="/assets/js/76.1faea219.js"><link rel="prefetch" href="/assets/js/77.656048ca.js"><link rel="prefetch" href="/assets/js/78.b9d17a6e.js"><link rel="prefetch" href="/assets/js/79.be94c637.js"><link rel="prefetch" href="/assets/js/8.dbdf253a.js"><link rel="prefetch" href="/assets/js/80.456a1a31.js"><link rel="prefetch" href="/assets/js/81.4d79b7af.js"><link rel="prefetch" href="/assets/js/82.97011954.js"><link rel="prefetch" href="/assets/js/83.188952b1.js"><link rel="prefetch" href="/assets/js/84.407c7d15.js"><link rel="prefetch" href="/assets/js/85.672952c4.js"><link rel="prefetch" href="/assets/js/86.4d499500.js"><link rel="prefetch" href="/assets/js/87.b75095ce.js"><link rel="prefetch" href="/assets/js/88.ab6ca5e4.js"><link rel="prefetch" href="/assets/js/89.4369e2bc.js"><link rel="prefetch" href="/assets/js/9.9674a929.js"><link rel="prefetch" href="/assets/js/90.bd5f43d3.js"><link rel="prefetch" href="/assets/js/91.9a86ea19.js"><link rel="prefetch" href="/assets/js/92.45e579dd.js"><link rel="prefetch" href="/assets/js/93.8cef8e34.js"><link rel="prefetch" href="/assets/js/94.c4bd09cc.js"><link rel="prefetch" href="/assets/js/95.725857ed.js"><link rel="prefetch" href="/assets/js/96.7ebd66c7.js"><link rel="prefetch" href="/assets/js/97.dac19df5.js"><link rel="prefetch" href="/assets/js/98.8ca473c8.js"><link rel="prefetch" href="/assets/js/99.81a92c64.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2a2f6a7f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Guangyuan's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/前端基础/" class="nav-link">
  FE-前端
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/前端基础/" class="nav-link">
  FE-前端
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>认知</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>web安全</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/前端基础/web安全/常见的web安全问题.html" class="active sidebar-link">01-常见的web安全</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法和数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>课程笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="xss攻击"><a href="#xss攻击" class="header-anchor">#</a> XSS攻击</h3> <blockquote><p>Cross Site Script
白话：将代码 ‘注入’网页中，让客户端执行。</p></blockquote> <h3 id="防御xss方式"><a href="#防御xss方式" class="header-anchor">#</a> 防御XSS方式</h3> <ul><li>转义字符</li></ul> <blockquote><p>将容易引起浏览器解析混淆的字符转义</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">escape</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'&amp;amp;'</span><span class="token punctuation">)</span>
    str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'&amp;lt;'</span><span class="token punctuation">)</span>
    str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'&amp;gt;'</span><span class="token punctuation">)</span>
    str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'&amp;quto;'</span><span class="token punctuation">)</span>
    str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">'</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'&amp;#39;'</span><span class="token punctuation">)</span>
    str <span class="token operator">=</span> str<span class="token punctuation">.</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'&amp;#x2F;'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>使用xss库</li></ul> <blockquote><p>Sanitize untrusted HTML (to prevent XSS) with a configuration specified by a Whitelist.</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> xss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'xss'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token function">xss</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>CSP</li></ul> <blockquote><p>内容安全策略 Content Security Policy
CSP 的实质就是白名单制度，开发者明确告诉客户端，哪些外部资源可以加载和执行，等同于提供白名单。它的实现和执行全部由浏览器完成，开发者只需提供配置。</p></blockquote> <ul><li>https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy</li></ul> <h3 id="csrf"><a href="#csrf" class="header-anchor">#</a> CSRF</h3> <blockquote><p>Cross Site Request Forgery 跨站请求<code>伪造</code>
重点是请求伪造， 白话：伪造执行有危害的操作，比如：修改密码.......</p></blockquote> <h3 id="防御csrf"><a href="#防御csrf" class="header-anchor">#</a> 防御CSRF</h3> <ol><li>Get请求不对数据进行修改 （后端关注）</li> <li>不让第三方网站访问到用户cookie</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Set<span class="token operator">-</span>Cookie<span class="token operator">:</span>SameSite<span class="token operator">=</span>Lax<span class="token punctuation">;</span>
<span class="token comment">// 设置了Strict或Lax以后，基本就杜绝了 CSRF 攻击。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>请求附带验证, csrf_token等</li> <li>验证refere字段</li></ol> <h3 id="点击劫持"><a href="#点击劫持" class="header-anchor">#</a> 点击劫持</h3> <blockquote><p>iframe</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">X</span><span class="token operator">-</span><span class="token constant">FAME</span><span class="token operator">-</span><span class="token constant">OPTIONS</span>
<span class="token constant">DENY</span>不允许iframe
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="中间人攻击"><a href="#中间人攻击" class="header-anchor">#</a> 中间人攻击</h3> <p>正常通信，客户端和服务端之间通信。而这个中间人可以简单理解为，在服务端和客户端之间的插入的第三者。</p> <blockquote><p>举个不恰当的例子，A国将军和B国将军如果都懂同一门语言，他们可以直接通话。而如果不懂的话，就需要翻译。这个翻译如果是个间谍........A,B两国最后爆发战争........</p></blockquote> <p>常见形式</p> <ul><li>WIFI，钓鱼热点</li> <li>HTTPS欺骗</li> <li>SSL劫持</li> <li>DNS欺骗（'长城'）</li></ul> <p>防御
HTTPS (注意：HTTPS降级攻击，SSLStrip)</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/前端基础/认知/01-学会如何学习.html" class="prev">
        01-学会如何学习
      </a></span> <span class="next"><a href="/前端基础/算法和数据结构/01-数组中的问题.html">
        01-数组中相关问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5ca665a5.js" defer></script><script src="/assets/js/2.7f87610c.js" defer></script><script src="/assets/js/39.16024434.js" defer></script>
  </body>
</html>
