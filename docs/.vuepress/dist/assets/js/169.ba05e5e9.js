(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{556:function(s,t,e){"use strict";e.r(t);var a=e(45),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"any-promise"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#any-promise"}},[s._v("#")]),s._v(" Any Promise")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://travis-ci.org/kevinbeaty/any-promise",target:"_blank",rel:"noopener noreferrer"}},[e("img",{attrs:{src:"https://secure.travis-ci.org/kevinbeaty/any-promise.svg",alt:"Build Status"}}),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("Let your library support any ES 2015 (ES6) compatible "),e("code",[s._v("Promise")]),s._v(" and leave the choice to application authors. The application can "),e("em",[s._v("optionally")]),s._v(" register its preferred "),e("code",[s._v("Promise")]),s._v(" implementation and it will be exported when requiring "),e("code",[s._v("any-promise")]),s._v(" from library code.")]),s._v(" "),e("p",[s._v("If no preference is registered, defaults to the global "),e("code",[s._v("Promise")]),s._v(" for newer Node.js versions. The browser version defaults to the window "),e("code",[s._v("Promise")]),s._v(", so polyfill or register as necessary.")]),s._v(" "),e("h3",{attrs:{id:"usage-with-global-promise"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usage-with-global-promise"}},[s._v("#")]),s._v(" Usage with global Promise:")]),s._v(" "),e("p",[s._v("Assuming the global "),e("code",[s._v("Promise")]),s._v(" is the desired implementation:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install any libraries depending on any-promise")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("The installed libraries will use global Promise by default.")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// in library")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" Promise "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the global Promise")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("promiseReturningFunction")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"usage-with-registration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usage-with-registration"}},[s._v("#")]),s._v(" Usage with registration:")]),s._v(" "),e("p",[s._v("Assuming "),e("code",[s._v("bluebird")]),s._v(" is the desired Promise implementation:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install preferred promise library")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" bluebird\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install any-promise to allow registration")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" any-promise\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Install any libraries you would like to use depending on any-promise")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("Register your preference in the application entry point before any other "),e("code",[s._v("require")]),s._v(" of packages that load "),e("code",[s._v("any-promise")]),s._v(":")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// top of application index.js or other entry point")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise/register/bluebird'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -or- Equivalent to above, but allows customization of Promise library")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise/register'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bluebird'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Promise"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bluebird'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("Now that the implementation is registered, you can use any package depending on "),e("code",[s._v("any-promise")]),s._v(":")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" fsp "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mz/fs'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// mz/fs will use registered bluebird promises")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" Promise "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the registered bluebird promise ")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("It is safe to call "),e("code",[s._v("register")]),s._v(" multiple times, but it must always be with the same implementation.")]),s._v(" "),e("p",[s._v("Again, registration is "),e("em",[s._v("optional")]),s._v(". It should only be called by the application user if overriding the global "),e("code",[s._v("Promise")]),s._v(" implementation is desired.")]),s._v(" "),e("h3",{attrs:{id:"optional-application-registration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optional-application-registration"}},[s._v("#")]),s._v(" Optional Application Registration")]),s._v(" "),e("p",[s._v("As an application author, you can "),e("em",[s._v("optionally")]),s._v(" register a preferred "),e("code",[s._v("Promise")]),s._v(" implementation on application startup (before any call to "),e("code",[s._v("require('any-promise')")]),s._v(":")]),s._v(" "),e("p",[s._v("You must register your preference before any call to "),e("code",[s._v("require('any-promise')")]),s._v(" (by you or required packages), and only one implementation can be registered. Typically, this registration would occur at the top of the application entry point.")]),s._v(" "),e("h4",{attrs:{id:"registration-shortcuts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#registration-shortcuts"}},[s._v("#")]),s._v(" Registration shortcuts")]),s._v(" "),e("p",[s._v("If you are using a known "),e("code",[s._v("Promise")]),s._v(" implementation, you can register your preference with a shortcut:")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise/register/bluebird'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -or-")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise/register/q'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("Shortcut registration is the preferred registration method as it works in the browser and Node.js. It is also convenient for using with "),e("code",[s._v("import")]),s._v(" and many test runners, that offer a "),e("code",[s._v("--require")]),s._v(" flag:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ ava --require=any-promise/register/bluebird test.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("Current known implementations include "),e("code",[s._v("bluebird")]),s._v(", "),e("code",[s._v("q")]),s._v(", "),e("code",[s._v("when")]),s._v(", "),e("code",[s._v("rsvp")]),s._v(", "),e("code",[s._v("es6-promise")]),s._v(", "),e("code",[s._v("promise")]),s._v(", "),e("code",[s._v("native-promise-only")]),s._v(", "),e("code",[s._v("pinkie")]),s._v(", "),e("code",[s._v("vow")]),s._v(" and "),e("code",[s._v("lie")]),s._v(". If you are not using a known implementation, you can use another registration method described below.")]),s._v(" "),e("h4",{attrs:{id:"basic-registration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#basic-registration"}},[s._v("#")]),s._v(" Basic Registration")]),s._v(" "),e("p",[s._v("As an alternative to registration shortcuts, you can call the "),e("code",[s._v("register")]),s._v(" function with the preferred "),e("code",[s._v("Promise")]),s._v(" implementation. The benefit of this approach is that a "),e("code",[s._v("Promise")]),s._v(" library can be required by name without being a known implementation.  This approach does NOT work in the browser. To use "),e("code",[s._v("any-promise")]),s._v(" in the browser use either registration shortcuts or specify the "),e("code",[s._v("Promise")]),s._v(" constructor using advanced registration (see below).")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise/register'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'when'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -or- require('any-promise/register')('any other ES6 compatible library (known or otherwise)')")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("This registration method will try to detect the "),e("code",[s._v("Promise")]),s._v(" constructor from requiring the specified implementation.  If you would like to specify your own constructor, see advanced registration.")]),s._v(" "),e("h4",{attrs:{id:"advanced-registration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#advanced-registration"}},[s._v("#")]),s._v(" Advanced Registration")]),s._v(" "),e("p",[s._v("To use the browser version, you should either install a polyfill or explicitly register the "),e("code",[s._v("Promise")]),s._v(" constructor:")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise/register'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bluebird'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Promise"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bluebird'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("This could also be used for registering a custom "),e("code",[s._v("Promise")]),s._v(" implementation or subclass.")]),s._v(" "),e("p",[s._v("Your preference will be registered globally, allowing a single registration even if multiple versions of "),e("code",[s._v("any-promise")]),s._v(" are installed in the NPM dependency tree or are using multiple bundled JavaScript files in the browser. You can bypass this global registration in options:")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../register'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'es6-promise'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Promise"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'es6-promise'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Promise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" global"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"library-usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#library-usage"}},[s._v("#")]),s._v(" Library Usage")]),s._v(" "),e("p",[s._v("To use any "),e("code",[s._v("Promise")]),s._v(" constructor, simply require it:")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" Promise "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'any-promise'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Promise\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("all")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" init"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" coll"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("item"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("reject")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("Except noted below, libraries using "),e("code",[s._v("any-promise")]),s._v(" should only use "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",target:"_blank",rel:"noopener noreferrer"}},[s._v("documented"),e("OutboundLink")],1),s._v(" functions as there is no guarantee which implementation will be chosen by the application author.  Libraries should never call "),e("code",[s._v("register")]),s._v(", only the application user should call if desired.")]),s._v(" "),e("h4",{attrs:{id:"advanced-library-usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#advanced-library-usage"}},[s._v("#")]),s._v(" Advanced Library Usage")]),s._v(" "),e("p",[s._v("If your library needs to branch code based on the registered implementation, you can retrieve it using "),e("code",[s._v("var impl = require('any-promise/implementation')")]),s._v(", where "),e("code",[s._v("impl")]),s._v(" will be the package name ("),e("code",[s._v('"bluebird"')]),s._v(", "),e("code",[s._v('"when"')]),s._v(", etc.) if registered, "),e("code",[s._v('"global.Promise"')]),s._v(" if using the global version on Node.js, or "),e("code",[s._v('"window.Promise"')]),s._v(" if using the browser version. You should always include a default case, as there is no guarantee what package may be registered.")]),s._v(" "),e("h3",{attrs:{id:"support-for-old-node-js-versions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#support-for-old-node-js-versions"}},[s._v("#")]),s._v(" Support for old Node.js versions")]),s._v(" "),e("p",[s._v("Node.js versions prior to "),e("code",[s._v("v0.12")]),s._v(" may have contained buggy versions of the global "),e("code",[s._v("Promise")]),s._v(". For this reason, the global "),e("code",[s._v("Promise")]),s._v(" is not loaded automatically for these old versions.  If using "),e("code",[s._v("any-promise")]),s._v(" in Node.js versions versions "),e("code",[s._v("<= v0.12")]),s._v(", the user should register a desired implementation.")]),s._v(" "),e("p",[s._v("If an implementation is not registered, "),e("code",[s._v("any-promise")]),s._v(" will attempt to discover an installed "),e("code",[s._v("Promise")]),s._v(" implementation.  If no implementation can be found, an error will be thrown on "),e("code",[s._v("require('any-promise')")]),s._v(".  While the auto-discovery usually avoids errors, it is non-deterministic. It is recommended that the user always register a preferred implementation for older Node.js versions.")]),s._v(" "),e("p",[s._v("This auto-discovery is only available for Node.jS versions prior to "),e("code",[s._v("v0.12")]),s._v(". Any newer versions will always default to the global "),e("code",[s._v("Promise")]),s._v(" implementation.")]),s._v(" "),e("h3",{attrs:{id:"related"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#related"}},[s._v("#")]),s._v(" Related")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/sindresorhus/any-observable",target:"_blank",rel:"noopener noreferrer"}},[s._v("any-observable"),e("OutboundLink")],1),s._v(" - "),e("code",[s._v("any-promise")]),s._v(" for Observables.")])])])}),[],!1,null,null,null);t.default=n.exports}}]);