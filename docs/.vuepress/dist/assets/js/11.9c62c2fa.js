(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{381:function(t,s,a){"use strict";a.r(s);var n=a(45),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"浏览器执行js的机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器执行js的机制"}},[t._v("#")]),t._v(" 浏览器执行js的机制")]),t._v(" "),a("p",[t._v("执行上下文 + 调用栈\n变量提升： 声明和赋值操作\n所谓的变量提升是指，在JavaScript代码执行过程中，JavaScript引擎把变量的声明部分和函数的声明部分提到开头的行为。变量提升后，会给变量设置默认值undefined;")]),t._v(" "),a("p",[t._v("javascript的执行流程\n加载代码阶段--\x3e编译阶段 ---\x3e 执行阶段")]),t._v(" "),a("h3",{attrs:{id:"编译阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译阶段"}},[t._v("#")]),t._v(" 编译阶段")]),t._v(" "),a("p",[t._v("编译代码，创建")]),t._v(" "),a("ol",[a("li",[t._v("执行上下文")])]),t._v(" "),a("ul",[a("li",[t._v("变量环境(this,变量，对象及其函数)")]),t._v(" "),a("li",[t._v("词法环境 (支持块级作用域 let const， 根据作用域块，在词法环境内部维护这一个栈结构)\n先在词法环境中查找，然后在变量环境中查找，只要找到就停止查找。")])]),t._v(" "),a("blockquote",[a("p",[t._v("块级作用域就是通过词法环境的栈结构来实现的，而变量提升是通过变量环境来实现，通过这两者的结合，JavaScript引擎也就同时支持了变量提升和块级作用域了")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("可执行代码")])]),t._v(" "),a("p",[t._v("编译成执行上下文")]),t._v(" "),a("ol",[a("li",[t._v("全局")]),t._v(" "),a("li",[t._v("函数")]),t._v(" "),a("li",[t._v("eval")])]),t._v(" "),a("p",[t._v("调用栈：用来管理函数之间的调用关系\n调用一个函数fn，为其创建执行上下文，并压入栈顶，执行fn的代码，执行完毕后，将函数的执行上下文从栈中弹出")]),t._v(" "),a("p",[t._v("作用域：控制着变量和函数的课访问范围和生命周期\n全局作用域\n函数作用域\n块级作用域")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("作用域链\n执行上下文")]),t._v(" "),a("ul",[a("li",[t._v("变量环境")]),t._v(" "),a("li",[t._v("词法环境")])]),t._v(" "),a("p",[t._v("可执行代码")]),t._v(" "),a("p",[t._v("其实在每个执行上下文的变量环境中，都包含了一个外部引用，用来指向外部的执行上下文，我们把这个外部引用称为outer。如果在当前的变量环境中没有查找到，那么 JavaScript 引擎会继续在 outer 所指向的执行上下文中查找。")]),t._v(" "),a("p",[t._v("作用域链是由词法作用域决定的。 词法作用域：就是指作用域由代码的声明文位置决定的，词法作用域是静态作用域，通过它能欧预测代码在执行过程中如何查找标识符")]),t._v(" "),a("p",[t._v("作用域链是通过词法作用域来确定的，而词法作用域反映了代码的结构。")]),t._v(" "),a("p",[t._v("函数执行完毕，销毁指向上下文。\n闭包保留着对其上下文的引用。")]),t._v(" "),a("p",[t._v("this和作用域链式两套不同的机制。")]),t._v(" "),a("p",[t._v("执行上下文：变量环境（outer) 词法环境 this")]),t._v(" "),a("p",[t._v("![image-20211102194652646](/Users/bobtang/Library/Application Support/typora-user-images/image-20211102194652646.png)")]),t._v(" "),a("h3",{attrs:{id:"有两种this"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有两种this"}},[t._v("#")]),t._v(" 有两种this")]),t._v(" "),a("ul",[a("li",[t._v("全局上下文中的this")]),t._v(" "),a("li",[t._v("函数的this")])]),t._v(" "),a("blockquote",[a("p",[t._v("call\n对象.函数")])]),t._v(" "),a("ul",[a("li",[t._v("eval中的this")])]),t._v(" "),a("h3",{attrs:{id:"this的设计缺陷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#this的设计缺陷"}},[t._v("#")]),t._v(" this的设计缺陷")]),t._v(" "),a("ol",[a("li",[t._v("嵌套函数中的this不会从外层函数中继承")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myObj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bob"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("showThis")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmyObj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("showThis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("普通函数的this默认指向window;")])]),t._v(" "),a("p",[t._v("箭头函数不会创建其自身的执行上下文，其this取决于外部的函数。")])])}),[],!1,null,null,null);s.default=e.exports}}]);